---
epic: 4
story: 1
title: Benchmarking (Party & State Averages)
status: In Progress
priority: Medium
clickup:
  task_id: ""
  epic_task_id: ""
  list: "Backlog"
  url: ""
  last_sync: ""
---

# Story 4.1: Benchmarking (Party & State Averages)

As a user,  
I want to compare a deputy's spending with the average of their party and state,  
so that I can understand if their spending is above or below the norm.

## ğŸ¯ Acceptance Criteria
- [x] AC1: Calculate the average spending of all deputies from the same Party.
- [x] AC2: Calculate the average spending of all deputies from the same State (UF).
- [x] AC3: Display a comparative chart (current deputy vs party avg vs state avg).
- [x] AC4: Add a summary text (e.g., "Gasta 12% acima da mÃ©dia do partido").

## ğŸ› ï¸ Dev Notes
- Using `Bar` chart with horizontal axis for comparison.
- Averaging logic implemented in `loadData` using Supabase queries.

## ğŸ¤– CodeRabbit Integration
> **CodeRabbit Integration**: Disabled

## ğŸ“ Tasks / Subtasks
- [x] Task 1: Implement global averaging logic in the frontend loadData.
- [x] Task 2: Create `BenchmarkingChart` component.
- [x] Task 3: Add the benchmarking section to `DeputyDashboard`.

